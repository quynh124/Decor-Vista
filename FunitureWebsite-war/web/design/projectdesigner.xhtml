<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:f="http://xmlns.jcp.org/jsf/core">

    <h:head>
        <title>Decor Vista - Designer Projects</title>
        <link rel="stylesheet" href="https://netdna.bootstrapcdn.com/bootstrap/3.3.4/css/bootstrap.min.css"/>
        <h:outputStylesheet name="css/profile.css" />
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
        <link type="text/css" rel="stylesheet" href="resources/css/styles.css" />
        <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/simple-datatables@latest" crossorigin="anonymous"></script>
        <link href="https://cdn.jsdelivr.net/npm/simple-datatables@latest/dist/style.css" rel="stylesheet" />
        <link href="https://cdn.datatables.net/2.0.7/css/dataTables.dataTables.min.css" rel="stylesheet" />
        <script src="https://use.fontawesome.com/releases/v6.1.0/js/all.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
        <script src="https://cdn.datatables.net/1.11.5/js/jquery.dataTables.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.7.0/chart.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.8.0/Chart.min.js"></script>
    </h:head>

    <h:body>
        <ui:insert name="header">
            <ui:include src="header.xhtml"/>
        </ui:insert>

        <section class="page-title" style="background-image:url(../resources/images/background/5.jpg)">
            <div class="auto-container">
                <h2>Designer Projects</h2>
                <ul class="page-breadcrumb">
                    <li><a href="../home.xhtml">Home</a></li>
                    <li>Designer Projects</li>
                </ul>
            </div>
        </section>
        <div class="container bootstrap snippets bootdey">
            <div class="row">
                <div class="profile-nav col-md-3">
                    <div class="panel">
                        <div class="user-heading round">
                            <a href="#">
                                <h:graphicImage value="../resources/images/designer/#{projectDesignerMB.loggedInDesigner.image}" width="100px"/>
                            </a>
                            <h1>#{projectDesignerMB.loggedInDesigner.firstName} #{projectDesignerMB.loggedInDesigner.lastName}</h1>
                            <p>#{projectDesignerMB.loggedInDesigner.phone}</p>
                        </div>

                        <ul class="nav nav-pills nav-stacked">
                            <li><a href="profile.xhtml"> <i class="fa fa-user"></i> Profile</a></li>
                            <li><a href="editprofile.xhtml"> <i class="fa fa-edit"></i> Edit Profile</a></li>
                            <li class="active"><a href="designerProjects.xhtml"> <i class="fa fa-briefcase"></i> Project Designer</a></li>
                        </ul>
                    </div>
                </div>
                <div class="profile-info col-md-9">
                    <div class="panel">
                        <div class="panel-body bio-graph-info">
                            <h1>My Projects</h1> 
                            <h:button image="../resources/images/icons/add.png" style="width: 30px" outcome="addproject" />
                            <div class="row">
                                <h:form>
                                    <h:messages globalOnly="true" />
                                    <h:outputText value="Number of projects: #{projectDesignerMB.projectList.size()}" /><br/>

                                    <h:panelGroup rendered="#{not empty projectDesignerMB.projectList}">
                                        <h:dataTable value="#{projectDesignerMB.projectList}" var="pd" border="1" styleClass="table table-striped">
                                            <h:column>
                                                <f:facet name="header">Project Name</f:facet>
                                                    #{pd.projectName}
                                            </h:column>
                                            <h:column>
                                                <f:facet name="header">Description</f:facet>
                                                    #{pd.description}
                                            </h:column>
                                            <h:column>
                                                <f:facet name="header">Image</f:facet>
                                                <h:graphicImage value="../resources/images/designer/project/#{pd.image}" width="100px"/>
                                            </h:column>
                                            <h:column>
    <h:commandButton value="Edit" styleClass="btn btn-primary" 
                     action="#{projectDesignerMB.loadProjectForEdit(project.projectID)}" />
</h:column>
                                                <h:commandButton image="../admin/resources/image/delete.png" action="#{projectDesignerMB.deleteProject(pd.projectID)}" style="width: 30px" type="submit"
                                                                 onclick="return confirm('Are you sure you want to delete this project?');"/>
                                            </h:column>
                                        </h:dataTable>
                                    </h:panelGroup>

                                    <h:panelGroup rendered="#{empty projectDesignerMB.projectList}">
                                        <h:outputText value="No projects found." />
                                    </h:panelGroup>
                                </h:form>
                            </div>
                        </div> 
                    </div>
                </div>
            </div>
        </div>

        <ui:insert name="bottom">
            <ui:include src="footer.xhtml"/>
        </ui:insert>

        <script src="https://netdna.bootstrapcdn.com/bootstrap/3.3.4/js/bootstrap.min.js"></script>
    </h:body>
</html>
